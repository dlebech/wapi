<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: core/notes.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: core/notes.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict';

/**
 * Provides 8 octaves of notes in the equal tempered note scale
 * (Middle A (A4) == 440 hertz)
 *
 * @module core/notes
 * @example
 * > var notes = require('./core/notes');
 * > notes.A4
 * 440
 * > notes['A4']
 * 440
 */
var notes = {};

// Notes on the same octave start at C and end at B.
// There are 12 notes for each octave.
// The lower-case s is used instead of # so referencing the notes is
// easier, i.e. notes.Cs instead of notes['C#']
var noteSymbols = ['C',  'Cs', 'D',  'Ds', 'E',  'F',
                   'Fs', 'G',  'Gs', 'A',  'As', 'B'];

// http://www.phy.mtu.edu/~suits/NoteFreqCalcs.html
// fn = A4 * a^n
// A4 = 440 hertz
// a = 2^(1/12)
// n = number of half-steps (semitones) from A4
var noteConstant = Math.pow(2, 1/12);

// Create 8 octaves.
for (var octave = 0; octave &lt; 8; octave++) {

    // Find offset from the middle octave
    // This should be 0 for the middle octave, positive for octaves
    // above the middle and negative for octaves below the middle.
    var middleOffset = (octave-4)*12;

    for (var note = 0; note &lt; 12; note++) {

        // Every note index corresponds to a number of half-steps
        // (semitones) from C in the given octave.
        // For example, if we are at octave 4, C4 is zero steps from C4
        // and D4 is 2 steps from C4.

        // Find offset from middle A (A4). For example:
        // C3 is 21 steps below A4 (-12-9+0)
        // C4 is 9 steps below A4 (0-9+0).
        // C5 is 3 steps above A4 (12-9+0)
        // C6 is 15 steps above A4 (24-9+0)
        var halfSteps = middleOffset-9+note;

        // Finally, the note frequency can be calculated and stored.
        var noteValue = 440 * Math.pow(noteConstant, halfSteps);
        notes[noteSymbols[note]+octave] = noteValue;
    }
}

module.exports = notes;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-core_envelope.html">core/envelope</a></li><li><a href="module-core_notes.html">core/notes</a></li><li><a href="module-core_track.html">core/track</a></li><li><a href="module-core_wapi.html">core/wapi</a></li><li><a href="module-effects_noise.html">effects/noise</a></li><li><a href="module-instruments_bass.html">instruments/bass</a></li><li><a href="module-instruments_drums.html">instruments/drums</a></li><li><a href="module-plugins_analyzer.html">plugins/analyzer</a></li></ul><h3>Interfaces</h3><ul><li><a href="WapiInstrument.html">WapiInstrument</a></li><li><a href="WapiPlugin.html">WapiPlugin</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0</a> on Fri Jul 24 2015 18:01:41 GMT+0200 (CEST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
